{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __asyncValues = this && this.__asyncValues || function (o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator],\n      i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i);\n\n  function verb(n) {\n    i[n] = o[n] && function (v) {\n      return new Promise(function (resolve, reject) {\n        v = o[n](v), settle(resolve, reject, v.done, v.value);\n      });\n    };\n  }\n\n  function settle(resolve, reject, d, v) {\n    Promise.resolve(v).then(function (v) {\n      resolve({\n        value: v,\n        done: d\n      });\n    }, reject);\n  }\n};\n\nvar __await = this && this.__await || function (v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n};\n\nvar __asyncGenerator = this && this.__asyncGenerator || function (thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []),\n      i,\n      q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i;\n\n  function verb(n) {\n    if (g[n]) i[n] = function (v) {\n      return new Promise(function (a, b) {\n        q.push([n, v, a, b]) > 1 || resume(n, v);\n      });\n    };\n  }\n\n  function resume(n, v) {\n    try {\n      step(g[n](v));\n    } catch (e) {\n      settle(q[0][3], e);\n    }\n  }\n\n  function step(r) {\n    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n  }\n\n  function fulfill(value) {\n    resume(\"next\", value);\n  }\n\n  function reject(value) {\n    resume(\"throw\", value);\n  }\n\n  function settle(f, v) {\n    if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n  }\n};\n\nimport { prettyByte } from \"./utils/prettyByte.mjs\";\nimport { ExtensionCodec } from \"./ExtensionCodec.mjs\";\nimport { getInt64, getUint64, UINT32_MAX } from \"./utils/int.mjs\";\nimport { utf8DecodeJs, TEXT_DECODER_THRESHOLD, utf8DecodeTD } from \"./utils/utf8.mjs\";\nimport { createDataView, ensureUint8Array } from \"./utils/typedArrays.mjs\";\nimport { CachedKeyDecoder } from \"./CachedKeyDecoder.mjs\";\nimport { DecodeError } from \"./DecodeError.mjs\";\n\nvar isValidMapKeyType = function (key) {\n  var keyType = typeof key;\n  return keyType === \"string\" || keyType === \"number\";\n};\n\nvar HEAD_BYTE_REQUIRED = -1;\nvar EMPTY_VIEW = new DataView(new ArrayBuffer(0));\nvar EMPTY_BYTES = new Uint8Array(EMPTY_VIEW.buffer); // IE11: Hack to support IE11.\n// IE11: Drop this hack and just use RangeError when IE11 is obsolete.\n\nexport var DataViewIndexOutOfBoundsError = function () {\n  try {\n    // IE11: The spec says it should throw RangeError,\n    // IE11: but in IE11 it throws TypeError.\n    EMPTY_VIEW.getInt8(0);\n  } catch (e) {\n    return e.constructor;\n  }\n\n  throw new Error(\"never reached\");\n}();\nvar MORE_DATA = new DataViewIndexOutOfBoundsError(\"Insufficient data\");\nvar sharedCachedKeyDecoder = new CachedKeyDecoder();\n\nvar Decoder =\n/** @class */\nfunction () {\n  function Decoder(extensionCodec, context, maxStrLength, maxBinLength, maxArrayLength, maxMapLength, maxExtLength, keyDecoder) {\n    if (extensionCodec === void 0) {\n      extensionCodec = ExtensionCodec.defaultCodec;\n    }\n\n    if (context === void 0) {\n      context = undefined;\n    }\n\n    if (maxStrLength === void 0) {\n      maxStrLength = UINT32_MAX;\n    }\n\n    if (maxBinLength === void 0) {\n      maxBinLength = UINT32_MAX;\n    }\n\n    if (maxArrayLength === void 0) {\n      maxArrayLength = UINT32_MAX;\n    }\n\n    if (maxMapLength === void 0) {\n      maxMapLength = UINT32_MAX;\n    }\n\n    if (maxExtLength === void 0) {\n      maxExtLength = UINT32_MAX;\n    }\n\n    if (keyDecoder === void 0) {\n      keyDecoder = sharedCachedKeyDecoder;\n    }\n\n    this.extensionCodec = extensionCodec;\n    this.context = context;\n    this.maxStrLength = maxStrLength;\n    this.maxBinLength = maxBinLength;\n    this.maxArrayLength = maxArrayLength;\n    this.maxMapLength = maxMapLength;\n    this.maxExtLength = maxExtLength;\n    this.keyDecoder = keyDecoder;\n    this.totalPos = 0;\n    this.pos = 0;\n    this.view = EMPTY_VIEW;\n    this.bytes = EMPTY_BYTES;\n    this.headByte = HEAD_BYTE_REQUIRED;\n    this.stack = [];\n  }\n\n  Decoder.prototype.reinitializeState = function () {\n    this.totalPos = 0;\n    this.headByte = HEAD_BYTE_REQUIRED;\n    this.stack.length = 0; // view, bytes, and pos will be re-initialized in setBuffer()\n  };\n\n  Decoder.prototype.setBuffer = function (buffer) {\n    this.bytes = ensureUint8Array(buffer);\n    this.view = createDataView(this.bytes);\n    this.pos = 0;\n  };\n\n  Decoder.prototype.appendBuffer = function (buffer) {\n    if (this.headByte === HEAD_BYTE_REQUIRED && !this.hasRemaining(1)) {\n      this.setBuffer(buffer);\n    } else {\n      var remainingData = this.bytes.subarray(this.pos);\n      var newData = ensureUint8Array(buffer); // concat remainingData + newData\n\n      var newBuffer = new Uint8Array(remainingData.length + newData.length);\n      newBuffer.set(remainingData);\n      newBuffer.set(newData, remainingData.length);\n      this.setBuffer(newBuffer);\n    }\n  };\n\n  Decoder.prototype.hasRemaining = function (size) {\n    return this.view.byteLength - this.pos >= size;\n  };\n\n  Decoder.prototype.createExtraByteError = function (posToShow) {\n    var _a = this,\n        view = _a.view,\n        pos = _a.pos;\n\n    return new RangeError(\"Extra \".concat(view.byteLength - pos, \" of \").concat(view.byteLength, \" byte(s) found at buffer[\").concat(posToShow, \"]\"));\n  };\n  /**\n   * @throws {@link DecodeError}\n   * @throws {@link RangeError}\n   */\n\n\n  Decoder.prototype.decode = function (buffer) {\n    this.reinitializeState();\n    this.setBuffer(buffer);\n    var object = this.doDecodeSync();\n\n    if (this.hasRemaining(1)) {\n      throw this.createExtraByteError(this.pos);\n    }\n\n    return object;\n  };\n\n  Decoder.prototype.decodeMulti = function (buffer) {\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          this.reinitializeState();\n          this.setBuffer(buffer);\n          _a.label = 1;\n\n        case 1:\n          if (!this.hasRemaining(1)) return [3\n          /*break*/\n          , 3];\n          return [4\n          /*yield*/\n          , this.doDecodeSync()];\n\n        case 2:\n          _a.sent();\n\n          return [3\n          /*break*/\n          , 1];\n\n        case 3:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  };\n\n  Decoder.prototype.decodeAsync = function (stream) {\n    var stream_1, stream_1_1;\n\n    var e_1, _a;\n\n    return __awaiter(this, void 0, void 0, function () {\n      var decoded, object, buffer, e_1_1, _b, headByte, pos, totalPos;\n\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            decoded = false;\n            _c.label = 1;\n\n          case 1:\n            _c.trys.push([1, 6, 7, 12]);\n\n            stream_1 = __asyncValues(stream);\n            _c.label = 2;\n\n          case 2:\n            return [4\n            /*yield*/\n            , stream_1.next()];\n\n          case 3:\n            if (!(stream_1_1 = _c.sent(), !stream_1_1.done)) return [3\n            /*break*/\n            , 5];\n            buffer = stream_1_1.value;\n\n            if (decoded) {\n              throw this.createExtraByteError(this.totalPos);\n            }\n\n            this.appendBuffer(buffer);\n\n            try {\n              object = this.doDecodeSync();\n              decoded = true;\n            } catch (e) {\n              if (!(e instanceof DataViewIndexOutOfBoundsError)) {\n                throw e; // rethrow\n              } // fallthrough\n\n            }\n\n            this.totalPos += this.pos;\n            _c.label = 4;\n\n          case 4:\n            return [3\n            /*break*/\n            , 2];\n\n          case 5:\n            return [3\n            /*break*/\n            , 12];\n\n          case 6:\n            e_1_1 = _c.sent();\n            e_1 = {\n              error: e_1_1\n            };\n            return [3\n            /*break*/\n            , 12];\n\n          case 7:\n            _c.trys.push([7,, 10, 11]);\n\n            if (!(stream_1_1 && !stream_1_1.done && (_a = stream_1.return))) return [3\n            /*break*/\n            , 9];\n            return [4\n            /*yield*/\n            , _a.call(stream_1)];\n\n          case 8:\n            _c.sent();\n\n            _c.label = 9;\n\n          case 9:\n            return [3\n            /*break*/\n            , 11];\n\n          case 10:\n            if (e_1) throw e_1.error;\n            return [7\n            /*endfinally*/\n            ];\n\n          case 11:\n            return [7\n            /*endfinally*/\n            ];\n\n          case 12:\n            if (decoded) {\n              if (this.hasRemaining(1)) {\n                throw this.createExtraByteError(this.totalPos);\n              }\n\n              return [2\n              /*return*/\n              , object];\n            }\n\n            _b = this, headByte = _b.headByte, pos = _b.pos, totalPos = _b.totalPos;\n            throw new RangeError(\"Insufficient data in parsing \".concat(prettyByte(headByte), \" at \").concat(totalPos, \" (\").concat(pos, \" in the current buffer)\"));\n        }\n      });\n    });\n  };\n\n  Decoder.prototype.decodeArrayStream = function (stream) {\n    return this.decodeMultiAsync(stream, true);\n  };\n\n  Decoder.prototype.decodeStream = function (stream) {\n    return this.decodeMultiAsync(stream, false);\n  };\n\n  Decoder.prototype.decodeMultiAsync = function (stream, isArray) {\n    return __asyncGenerator(this, arguments, function decodeMultiAsync_1() {\n      var isArrayHeaderRequired, arrayItemsLeft, stream_2, stream_2_1, buffer, e_2, e_3_1;\n\n      var e_3, _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            isArrayHeaderRequired = isArray;\n            arrayItemsLeft = -1;\n            _b.label = 1;\n\n          case 1:\n            _b.trys.push([1, 13, 14, 19]);\n\n            stream_2 = __asyncValues(stream);\n            _b.label = 2;\n\n          case 2:\n            return [4\n            /*yield*/\n            , __await(stream_2.next())];\n\n          case 3:\n            if (!(stream_2_1 = _b.sent(), !stream_2_1.done)) return [3\n            /*break*/\n            , 12];\n            buffer = stream_2_1.value;\n\n            if (isArray && arrayItemsLeft === 0) {\n              throw this.createExtraByteError(this.totalPos);\n            }\n\n            this.appendBuffer(buffer);\n\n            if (isArrayHeaderRequired) {\n              arrayItemsLeft = this.readArraySize();\n              isArrayHeaderRequired = false;\n              this.complete();\n            }\n\n            _b.label = 4;\n\n          case 4:\n            _b.trys.push([4, 9,, 10]);\n\n            _b.label = 5;\n\n          case 5:\n            if (!true) return [3\n            /*break*/\n            , 8];\n            return [4\n            /*yield*/\n            , __await(this.doDecodeSync())];\n\n          case 6:\n            return [4\n            /*yield*/\n            , _b.sent()];\n\n          case 7:\n            _b.sent();\n\n            if (--arrayItemsLeft === 0) {\n              return [3\n              /*break*/\n              , 8];\n            }\n\n            return [3\n            /*break*/\n            , 5];\n\n          case 8:\n            return [3\n            /*break*/\n            , 10];\n\n          case 9:\n            e_2 = _b.sent();\n\n            if (!(e_2 instanceof DataViewIndexOutOfBoundsError)) {\n              throw e_2; // rethrow\n            }\n\n            return [3\n            /*break*/\n            , 10];\n\n          case 10:\n            this.totalPos += this.pos;\n            _b.label = 11;\n\n          case 11:\n            return [3\n            /*break*/\n            , 2];\n\n          case 12:\n            return [3\n            /*break*/\n            , 19];\n\n          case 13:\n            e_3_1 = _b.sent();\n            e_3 = {\n              error: e_3_1\n            };\n            return [3\n            /*break*/\n            , 19];\n\n          case 14:\n            _b.trys.push([14,, 17, 18]);\n\n            if (!(stream_2_1 && !stream_2_1.done && (_a = stream_2.return))) return [3\n            /*break*/\n            , 16];\n            return [4\n            /*yield*/\n            , __await(_a.call(stream_2))];\n\n          case 15:\n            _b.sent();\n\n            _b.label = 16;\n\n          case 16:\n            return [3\n            /*break*/\n            , 18];\n\n          case 17:\n            if (e_3) throw e_3.error;\n            return [7\n            /*endfinally*/\n            ];\n\n          case 18:\n            return [7\n            /*endfinally*/\n            ];\n\n          case 19:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  Decoder.prototype.doDecodeSync = function () {\n    DECODE: while (true) {\n      var headByte = this.readHeadByte();\n      var object = void 0;\n\n      if (headByte >= 0xe0) {\n        // negative fixint (111x xxxx) 0xe0 - 0xff\n        object = headByte - 0x100;\n      } else if (headByte < 0xc0) {\n        if (headByte < 0x80) {\n          // positive fixint (0xxx xxxx) 0x00 - 0x7f\n          object = headByte;\n        } else if (headByte < 0x90) {\n          // fixmap (1000 xxxx) 0x80 - 0x8f\n          var size = headByte - 0x80;\n\n          if (size !== 0) {\n            this.pushMapState(size);\n            this.complete();\n            continue DECODE;\n          } else {\n            object = {};\n          }\n        } else if (headByte < 0xa0) {\n          // fixarray (1001 xxxx) 0x90 - 0x9f\n          var size = headByte - 0x90;\n\n          if (size !== 0) {\n            this.pushArrayState(size);\n            this.complete();\n            continue DECODE;\n          } else {\n            object = [];\n          }\n        } else {\n          // fixstr (101x xxxx) 0xa0 - 0xbf\n          var byteLength = headByte - 0xa0;\n          object = this.decodeUtf8String(byteLength, 0);\n        }\n      } else if (headByte === 0xc0) {\n        // nil\n        object = null;\n      } else if (headByte === 0xc2) {\n        // false\n        object = false;\n      } else if (headByte === 0xc3) {\n        // true\n        object = true;\n      } else if (headByte === 0xca) {\n        // float 32\n        object = this.readF32();\n      } else if (headByte === 0xcb) {\n        // float 64\n        object = this.readF64();\n      } else if (headByte === 0xcc) {\n        // uint 8\n        object = this.readU8();\n      } else if (headByte === 0xcd) {\n        // uint 16\n        object = this.readU16();\n      } else if (headByte === 0xce) {\n        // uint 32\n        object = this.readU32();\n      } else if (headByte === 0xcf) {\n        // uint 64\n        object = this.readU64();\n      } else if (headByte === 0xd0) {\n        // int 8\n        object = this.readI8();\n      } else if (headByte === 0xd1) {\n        // int 16\n        object = this.readI16();\n      } else if (headByte === 0xd2) {\n        // int 32\n        object = this.readI32();\n      } else if (headByte === 0xd3) {\n        // int 64\n        object = this.readI64();\n      } else if (headByte === 0xd9) {\n        // str 8\n        var byteLength = this.lookU8();\n        object = this.decodeUtf8String(byteLength, 1);\n      } else if (headByte === 0xda) {\n        // str 16\n        var byteLength = this.lookU16();\n        object = this.decodeUtf8String(byteLength, 2);\n      } else if (headByte === 0xdb) {\n        // str 32\n        var byteLength = this.lookU32();\n        object = this.decodeUtf8String(byteLength, 4);\n      } else if (headByte === 0xdc) {\n        // array 16\n        var size = this.readU16();\n\n        if (size !== 0) {\n          this.pushArrayState(size);\n          this.complete();\n          continue DECODE;\n        } else {\n          object = [];\n        }\n      } else if (headByte === 0xdd) {\n        // array 32\n        var size = this.readU32();\n\n        if (size !== 0) {\n          this.pushArrayState(size);\n          this.complete();\n          continue DECODE;\n        } else {\n          object = [];\n        }\n      } else if (headByte === 0xde) {\n        // map 16\n        var size = this.readU16();\n\n        if (size !== 0) {\n          this.pushMapState(size);\n          this.complete();\n          continue DECODE;\n        } else {\n          object = {};\n        }\n      } else if (headByte === 0xdf) {\n        // map 32\n        var size = this.readU32();\n\n        if (size !== 0) {\n          this.pushMapState(size);\n          this.complete();\n          continue DECODE;\n        } else {\n          object = {};\n        }\n      } else if (headByte === 0xc4) {\n        // bin 8\n        var size = this.lookU8();\n        object = this.decodeBinary(size, 1);\n      } else if (headByte === 0xc5) {\n        // bin 16\n        var size = this.lookU16();\n        object = this.decodeBinary(size, 2);\n      } else if (headByte === 0xc6) {\n        // bin 32\n        var size = this.lookU32();\n        object = this.decodeBinary(size, 4);\n      } else if (headByte === 0xd4) {\n        // fixext 1\n        object = this.decodeExtension(1, 0);\n      } else if (headByte === 0xd5) {\n        // fixext 2\n        object = this.decodeExtension(2, 0);\n      } else if (headByte === 0xd6) {\n        // fixext 4\n        object = this.decodeExtension(4, 0);\n      } else if (headByte === 0xd7) {\n        // fixext 8\n        object = this.decodeExtension(8, 0);\n      } else if (headByte === 0xd8) {\n        // fixext 16\n        object = this.decodeExtension(16, 0);\n      } else if (headByte === 0xc7) {\n        // ext 8\n        var size = this.lookU8();\n        object = this.decodeExtension(size, 1);\n      } else if (headByte === 0xc8) {\n        // ext 16\n        var size = this.lookU16();\n        object = this.decodeExtension(size, 2);\n      } else if (headByte === 0xc9) {\n        // ext 32\n        var size = this.lookU32();\n        object = this.decodeExtension(size, 4);\n      } else {\n        throw new DecodeError(\"Unrecognized type byte: \".concat(prettyByte(headByte)));\n      }\n\n      this.complete();\n      var stack = this.stack;\n\n      while (stack.length > 0) {\n        // arrays and maps\n        var state = stack[stack.length - 1];\n\n        if (state.type === 0\n        /* State.ARRAY */\n        ) {\n          state.array[state.position] = object;\n          state.position++;\n\n          if (state.position === state.size) {\n            stack.pop();\n            object = state.array;\n          } else {\n            continue DECODE;\n          }\n        } else if (state.type === 1\n        /* State.MAP_KEY */\n        ) {\n          if (!isValidMapKeyType(object)) {\n            throw new DecodeError(\"The type of key must be string or number but \" + typeof object);\n          }\n\n          if (object === \"__proto__\") {\n            throw new DecodeError(\"The key __proto__ is not allowed\");\n          }\n\n          state.key = object;\n          state.type = 2\n          /* State.MAP_VALUE */\n          ;\n          continue DECODE;\n        } else {\n          // it must be `state.type === State.MAP_VALUE` here\n          state.map[state.key] = object;\n          state.readCount++;\n\n          if (state.readCount === state.size) {\n            stack.pop();\n            object = state.map;\n          } else {\n            state.key = null;\n            state.type = 1\n            /* State.MAP_KEY */\n            ;\n            continue DECODE;\n          }\n        }\n      }\n\n      return object;\n    }\n  };\n\n  Decoder.prototype.readHeadByte = function () {\n    if (this.headByte === HEAD_BYTE_REQUIRED) {\n      this.headByte = this.readU8(); // console.log(\"headByte\", prettyByte(this.headByte));\n    }\n\n    return this.headByte;\n  };\n\n  Decoder.prototype.complete = function () {\n    this.headByte = HEAD_BYTE_REQUIRED;\n  };\n\n  Decoder.prototype.readArraySize = function () {\n    var headByte = this.readHeadByte();\n\n    switch (headByte) {\n      case 0xdc:\n        return this.readU16();\n\n      case 0xdd:\n        return this.readU32();\n\n      default:\n        {\n          if (headByte < 0xa0) {\n            return headByte - 0x90;\n          } else {\n            throw new DecodeError(\"Unrecognized array type byte: \".concat(prettyByte(headByte)));\n          }\n        }\n    }\n  };\n\n  Decoder.prototype.pushMapState = function (size) {\n    if (size > this.maxMapLength) {\n      throw new DecodeError(\"Max length exceeded: map length (\".concat(size, \") > maxMapLengthLength (\").concat(this.maxMapLength, \")\"));\n    }\n\n    this.stack.push({\n      type: 1\n      /* State.MAP_KEY */\n      ,\n      size: size,\n      key: null,\n      readCount: 0,\n      map: {}\n    });\n  };\n\n  Decoder.prototype.pushArrayState = function (size) {\n    if (size > this.maxArrayLength) {\n      throw new DecodeError(\"Max length exceeded: array length (\".concat(size, \") > maxArrayLength (\").concat(this.maxArrayLength, \")\"));\n    }\n\n    this.stack.push({\n      type: 0\n      /* State.ARRAY */\n      ,\n      size: size,\n      array: new Array(size),\n      position: 0\n    });\n  };\n\n  Decoder.prototype.decodeUtf8String = function (byteLength, headerOffset) {\n    var _a;\n\n    if (byteLength > this.maxStrLength) {\n      throw new DecodeError(\"Max length exceeded: UTF-8 byte length (\".concat(byteLength, \") > maxStrLength (\").concat(this.maxStrLength, \")\"));\n    }\n\n    if (this.bytes.byteLength < this.pos + headerOffset + byteLength) {\n      throw MORE_DATA;\n    }\n\n    var offset = this.pos + headerOffset;\n    var object;\n\n    if (this.stateIsMapKey() && ((_a = this.keyDecoder) === null || _a === void 0 ? void 0 : _a.canBeCached(byteLength))) {\n      object = this.keyDecoder.decode(this.bytes, offset, byteLength);\n    } else if (byteLength > TEXT_DECODER_THRESHOLD) {\n      object = utf8DecodeTD(this.bytes, offset, byteLength);\n    } else {\n      object = utf8DecodeJs(this.bytes, offset, byteLength);\n    }\n\n    this.pos += headerOffset + byteLength;\n    return object;\n  };\n\n  Decoder.prototype.stateIsMapKey = function () {\n    if (this.stack.length > 0) {\n      var state = this.stack[this.stack.length - 1];\n      return state.type === 1\n      /* State.MAP_KEY */\n      ;\n    }\n\n    return false;\n  };\n\n  Decoder.prototype.decodeBinary = function (byteLength, headOffset) {\n    if (byteLength > this.maxBinLength) {\n      throw new DecodeError(\"Max length exceeded: bin length (\".concat(byteLength, \") > maxBinLength (\").concat(this.maxBinLength, \")\"));\n    }\n\n    if (!this.hasRemaining(byteLength + headOffset)) {\n      throw MORE_DATA;\n    }\n\n    var offset = this.pos + headOffset;\n    var object = this.bytes.subarray(offset, offset + byteLength);\n    this.pos += headOffset + byteLength;\n    return object;\n  };\n\n  Decoder.prototype.decodeExtension = function (size, headOffset) {\n    if (size > this.maxExtLength) {\n      throw new DecodeError(\"Max length exceeded: ext length (\".concat(size, \") > maxExtLength (\").concat(this.maxExtLength, \")\"));\n    }\n\n    var extType = this.view.getInt8(this.pos + headOffset);\n    var data = this.decodeBinary(size, headOffset + 1\n    /* extType */\n    );\n    return this.extensionCodec.decode(data, extType, this.context);\n  };\n\n  Decoder.prototype.lookU8 = function () {\n    return this.view.getUint8(this.pos);\n  };\n\n  Decoder.prototype.lookU16 = function () {\n    return this.view.getUint16(this.pos);\n  };\n\n  Decoder.prototype.lookU32 = function () {\n    return this.view.getUint32(this.pos);\n  };\n\n  Decoder.prototype.readU8 = function () {\n    var value = this.view.getUint8(this.pos);\n    this.pos++;\n    return value;\n  };\n\n  Decoder.prototype.readI8 = function () {\n    var value = this.view.getInt8(this.pos);\n    this.pos++;\n    return value;\n  };\n\n  Decoder.prototype.readU16 = function () {\n    var value = this.view.getUint16(this.pos);\n    this.pos += 2;\n    return value;\n  };\n\n  Decoder.prototype.readI16 = function () {\n    var value = this.view.getInt16(this.pos);\n    this.pos += 2;\n    return value;\n  };\n\n  Decoder.prototype.readU32 = function () {\n    var value = this.view.getUint32(this.pos);\n    this.pos += 4;\n    return value;\n  };\n\n  Decoder.prototype.readI32 = function () {\n    var value = this.view.getInt32(this.pos);\n    this.pos += 4;\n    return value;\n  };\n\n  Decoder.prototype.readU64 = function () {\n    var value = getUint64(this.view, this.pos);\n    this.pos += 8;\n    return value;\n  };\n\n  Decoder.prototype.readI64 = function () {\n    var value = getInt64(this.view, this.pos);\n    this.pos += 8;\n    return value;\n  };\n\n  Decoder.prototype.readF32 = function () {\n    var value = this.view.getFloat32(this.pos);\n    this.pos += 4;\n    return value;\n  };\n\n  Decoder.prototype.readF64 = function () {\n    var value = this.view.getFloat64(this.pos);\n    this.pos += 8;\n    return value;\n  };\n\n  return Decoder;\n}();\n\nexport { Decoder };","map":{"version":3,"sources":["/Users/futorine/dev/holochain/holochain-engineers/team-mates/node_modules/@msgpack/msgpack/dist.es5+esm/Decoder.mjs"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","__asyncValues","o","asyncIterator","m","i","__values","settle","d","__await","__asyncGenerator","q","a","b","resume","r","fulfill","shift","prettyByte","ExtensionCodec","getInt64","getUint64","UINT32_MAX","utf8DecodeJs","TEXT_DECODER_THRESHOLD","utf8DecodeTD","createDataView","ensureUint8Array","CachedKeyDecoder","DecodeError","isValidMapKeyType","key","keyType","HEAD_BYTE_REQUIRED","EMPTY_VIEW","DataView","ArrayBuffer","EMPTY_BYTES","Uint8Array","buffer","DataViewIndexOutOfBoundsError","getInt8","constructor","Error","MORE_DATA","sharedCachedKeyDecoder","Decoder","extensionCodec","context","maxStrLength","maxBinLength","maxArrayLength","maxMapLength","maxExtLength","keyDecoder","defaultCodec","undefined","totalPos","pos","view","bytes","headByte","stack","prototype","reinitializeState","setBuffer","appendBuffer","hasRemaining","remainingData","subarray","newData","newBuffer","set","size","byteLength","createExtraByteError","posToShow","_a","RangeError","concat","decode","object","doDecodeSync","decodeMulti","decodeAsync","stream","stream_1","stream_1_1","e_1","decoded","e_1_1","_b","_c","error","return","decodeArrayStream","decodeMultiAsync","decodeStream","isArray","arguments","decodeMultiAsync_1","isArrayHeaderRequired","arrayItemsLeft","stream_2","stream_2_1","e_2","e_3_1","e_3","readArraySize","complete","DECODE","readHeadByte","pushMapState","pushArrayState","decodeUtf8String","readF32","readF64","readU8","readU16","readU32","readU64","readI8","readI16","readI32","readI64","lookU8","lookU16","lookU32","decodeBinary","decodeExtension","state","type","array","position","map","readCount","Array","headerOffset","offset","stateIsMapKey","canBeCached","headOffset","extType","data","getUint8","getUint16","getUint32","getInt16","getInt32","getFloat32","getFloat64"],"mappings":"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","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nvar __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\nvar __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n    function fulfill(value) { resume(\"next\", value); }\n    function reject(value) { resume(\"throw\", value); }\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n};\nimport { prettyByte } from \"./utils/prettyByte.mjs\";\nimport { ExtensionCodec } from \"./ExtensionCodec.mjs\";\nimport { getInt64, getUint64, UINT32_MAX } from \"./utils/int.mjs\";\nimport { utf8DecodeJs, TEXT_DECODER_THRESHOLD, utf8DecodeTD } from \"./utils/utf8.mjs\";\nimport { createDataView, ensureUint8Array } from \"./utils/typedArrays.mjs\";\nimport { CachedKeyDecoder } from \"./CachedKeyDecoder.mjs\";\nimport { DecodeError } from \"./DecodeError.mjs\";\nvar isValidMapKeyType = function (key) {\n    var keyType = typeof key;\n    return keyType === \"string\" || keyType === \"number\";\n};\nvar HEAD_BYTE_REQUIRED = -1;\nvar EMPTY_VIEW = new DataView(new ArrayBuffer(0));\nvar EMPTY_BYTES = new Uint8Array(EMPTY_VIEW.buffer);\n// IE11: Hack to support IE11.\n// IE11: Drop this hack and just use RangeError when IE11 is obsolete.\nexport var DataViewIndexOutOfBoundsError = (function () {\n    try {\n        // IE11: The spec says it should throw RangeError,\n        // IE11: but in IE11 it throws TypeError.\n        EMPTY_VIEW.getInt8(0);\n    }\n    catch (e) {\n        return e.constructor;\n    }\n    throw new Error(\"never reached\");\n})();\nvar MORE_DATA = new DataViewIndexOutOfBoundsError(\"Insufficient data\");\nvar sharedCachedKeyDecoder = new CachedKeyDecoder();\nvar Decoder = /** @class */ (function () {\n    function Decoder(extensionCodec, context, maxStrLength, maxBinLength, maxArrayLength, maxMapLength, maxExtLength, keyDecoder) {\n        if (extensionCodec === void 0) { extensionCodec = ExtensionCodec.defaultCodec; }\n        if (context === void 0) { context = undefined; }\n        if (maxStrLength === void 0) { maxStrLength = UINT32_MAX; }\n        if (maxBinLength === void 0) { maxBinLength = UINT32_MAX; }\n        if (maxArrayLength === void 0) { maxArrayLength = UINT32_MAX; }\n        if (maxMapLength === void 0) { maxMapLength = UINT32_MAX; }\n        if (maxExtLength === void 0) { maxExtLength = UINT32_MAX; }\n        if (keyDecoder === void 0) { keyDecoder = sharedCachedKeyDecoder; }\n        this.extensionCodec = extensionCodec;\n        this.context = context;\n        this.maxStrLength = maxStrLength;\n        this.maxBinLength = maxBinLength;\n        this.maxArrayLength = maxArrayLength;\n        this.maxMapLength = maxMapLength;\n        this.maxExtLength = maxExtLength;\n        this.keyDecoder = keyDecoder;\n        this.totalPos = 0;\n        this.pos = 0;\n        this.view = EMPTY_VIEW;\n        this.bytes = EMPTY_BYTES;\n        this.headByte = HEAD_BYTE_REQUIRED;\n        this.stack = [];\n    }\n    Decoder.prototype.reinitializeState = function () {\n        this.totalPos = 0;\n        this.headByte = HEAD_BYTE_REQUIRED;\n        this.stack.length = 0;\n        // view, bytes, and pos will be re-initialized in setBuffer()\n    };\n    Decoder.prototype.setBuffer = function (buffer) {\n        this.bytes = ensureUint8Array(buffer);\n        this.view = createDataView(this.bytes);\n        this.pos = 0;\n    };\n    Decoder.prototype.appendBuffer = function (buffer) {\n        if (this.headByte === HEAD_BYTE_REQUIRED && !this.hasRemaining(1)) {\n            this.setBuffer(buffer);\n        }\n        else {\n            var remainingData = this.bytes.subarray(this.pos);\n            var newData = ensureUint8Array(buffer);\n            // concat remainingData + newData\n            var newBuffer = new Uint8Array(remainingData.length + newData.length);\n            newBuffer.set(remainingData);\n            newBuffer.set(newData, remainingData.length);\n            this.setBuffer(newBuffer);\n        }\n    };\n    Decoder.prototype.hasRemaining = function (size) {\n        return this.view.byteLength - this.pos >= size;\n    };\n    Decoder.prototype.createExtraByteError = function (posToShow) {\n        var _a = this, view = _a.view, pos = _a.pos;\n        return new RangeError(\"Extra \".concat(view.byteLength - pos, \" of \").concat(view.byteLength, \" byte(s) found at buffer[\").concat(posToShow, \"]\"));\n    };\n    /**\n     * @throws {@link DecodeError}\n     * @throws {@link RangeError}\n     */\n    Decoder.prototype.decode = function (buffer) {\n        this.reinitializeState();\n        this.setBuffer(buffer);\n        var object = this.doDecodeSync();\n        if (this.hasRemaining(1)) {\n            throw this.createExtraByteError(this.pos);\n        }\n        return object;\n    };\n    Decoder.prototype.decodeMulti = function (buffer) {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    this.reinitializeState();\n                    this.setBuffer(buffer);\n                    _a.label = 1;\n                case 1:\n                    if (!this.hasRemaining(1)) return [3 /*break*/, 3];\n                    return [4 /*yield*/, this.doDecodeSync()];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 1];\n                case 3: return [2 /*return*/];\n            }\n        });\n    };\n    Decoder.prototype.decodeAsync = function (stream) {\n        var stream_1, stream_1_1;\n        var e_1, _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var decoded, object, buffer, e_1_1, _b, headByte, pos, totalPos;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        decoded = false;\n                        _c.label = 1;\n                    case 1:\n                        _c.trys.push([1, 6, 7, 12]);\n                        stream_1 = __asyncValues(stream);\n                        _c.label = 2;\n                    case 2: return [4 /*yield*/, stream_1.next()];\n                    case 3:\n                        if (!(stream_1_1 = _c.sent(), !stream_1_1.done)) return [3 /*break*/, 5];\n                        buffer = stream_1_1.value;\n                        if (decoded) {\n                            throw this.createExtraByteError(this.totalPos);\n                        }\n                        this.appendBuffer(buffer);\n                        try {\n                            object = this.doDecodeSync();\n                            decoded = true;\n                        }\n                        catch (e) {\n                            if (!(e instanceof DataViewIndexOutOfBoundsError)) {\n                                throw e; // rethrow\n                            }\n                            // fallthrough\n                        }\n                        this.totalPos += this.pos;\n                        _c.label = 4;\n                    case 4: return [3 /*break*/, 2];\n                    case 5: return [3 /*break*/, 12];\n                    case 6:\n                        e_1_1 = _c.sent();\n                        e_1 = { error: e_1_1 };\n                        return [3 /*break*/, 12];\n                    case 7:\n                        _c.trys.push([7, , 10, 11]);\n                        if (!(stream_1_1 && !stream_1_1.done && (_a = stream_1.return))) return [3 /*break*/, 9];\n                        return [4 /*yield*/, _a.call(stream_1)];\n                    case 8:\n                        _c.sent();\n                        _c.label = 9;\n                    case 9: return [3 /*break*/, 11];\n                    case 10:\n                        if (e_1) throw e_1.error;\n                        return [7 /*endfinally*/];\n                    case 11: return [7 /*endfinally*/];\n                    case 12:\n                        if (decoded) {\n                            if (this.hasRemaining(1)) {\n                                throw this.createExtraByteError(this.totalPos);\n                            }\n                            return [2 /*return*/, object];\n                        }\n                        _b = this, headByte = _b.headByte, pos = _b.pos, totalPos = _b.totalPos;\n                        throw new RangeError(\"Insufficient data in parsing \".concat(prettyByte(headByte), \" at \").concat(totalPos, \" (\").concat(pos, \" in the current buffer)\"));\n                }\n            });\n        });\n    };\n    Decoder.prototype.decodeArrayStream = function (stream) {\n        return this.decodeMultiAsync(stream, true);\n    };\n    Decoder.prototype.decodeStream = function (stream) {\n        return this.decodeMultiAsync(stream, false);\n    };\n    Decoder.prototype.decodeMultiAsync = function (stream, isArray) {\n        return __asyncGenerator(this, arguments, function decodeMultiAsync_1() {\n            var isArrayHeaderRequired, arrayItemsLeft, stream_2, stream_2_1, buffer, e_2, e_3_1;\n            var e_3, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        isArrayHeaderRequired = isArray;\n                        arrayItemsLeft = -1;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 13, 14, 19]);\n                        stream_2 = __asyncValues(stream);\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, __await(stream_2.next())];\n                    case 3:\n                        if (!(stream_2_1 = _b.sent(), !stream_2_1.done)) return [3 /*break*/, 12];\n                        buffer = stream_2_1.value;\n                        if (isArray && arrayItemsLeft === 0) {\n                            throw this.createExtraByteError(this.totalPos);\n                        }\n                        this.appendBuffer(buffer);\n                        if (isArrayHeaderRequired) {\n                            arrayItemsLeft = this.readArraySize();\n                            isArrayHeaderRequired = false;\n                            this.complete();\n                        }\n                        _b.label = 4;\n                    case 4:\n                        _b.trys.push([4, 9, , 10]);\n                        _b.label = 5;\n                    case 5:\n                        if (!true) return [3 /*break*/, 8];\n                        return [4 /*yield*/, __await(this.doDecodeSync())];\n                    case 6: return [4 /*yield*/, _b.sent()];\n                    case 7:\n                        _b.sent();\n                        if (--arrayItemsLeft === 0) {\n                            return [3 /*break*/, 8];\n                        }\n                        return [3 /*break*/, 5];\n                    case 8: return [3 /*break*/, 10];\n                    case 9:\n                        e_2 = _b.sent();\n                        if (!(e_2 instanceof DataViewIndexOutOfBoundsError)) {\n                            throw e_2; // rethrow\n                        }\n                        return [3 /*break*/, 10];\n                    case 10:\n                        this.totalPos += this.pos;\n                        _b.label = 11;\n                    case 11: return [3 /*break*/, 2];\n                    case 12: return [3 /*break*/, 19];\n                    case 13:\n                        e_3_1 = _b.sent();\n                        e_3 = { error: e_3_1 };\n                        return [3 /*break*/, 19];\n                    case 14:\n                        _b.trys.push([14, , 17, 18]);\n                        if (!(stream_2_1 && !stream_2_1.done && (_a = stream_2.return))) return [3 /*break*/, 16];\n                        return [4 /*yield*/, __await(_a.call(stream_2))];\n                    case 15:\n                        _b.sent();\n                        _b.label = 16;\n                    case 16: return [3 /*break*/, 18];\n                    case 17:\n                        if (e_3) throw e_3.error;\n                        return [7 /*endfinally*/];\n                    case 18: return [7 /*endfinally*/];\n                    case 19: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Decoder.prototype.doDecodeSync = function () {\n        DECODE: while (true) {\n            var headByte = this.readHeadByte();\n            var object = void 0;\n            if (headByte >= 0xe0) {\n                // negative fixint (111x xxxx) 0xe0 - 0xff\n                object = headByte - 0x100;\n            }\n            else if (headByte < 0xc0) {\n                if (headByte < 0x80) {\n                    // positive fixint (0xxx xxxx) 0x00 - 0x7f\n                    object = headByte;\n                }\n                else if (headByte < 0x90) {\n                    // fixmap (1000 xxxx) 0x80 - 0x8f\n                    var size = headByte - 0x80;\n                    if (size !== 0) {\n                        this.pushMapState(size);\n                        this.complete();\n                        continue DECODE;\n                    }\n                    else {\n                        object = {};\n                    }\n                }\n                else if (headByte < 0xa0) {\n                    // fixarray (1001 xxxx) 0x90 - 0x9f\n                    var size = headByte - 0x90;\n                    if (size !== 0) {\n                        this.pushArrayState(size);\n                        this.complete();\n                        continue DECODE;\n                    }\n                    else {\n                        object = [];\n                    }\n                }\n                else {\n                    // fixstr (101x xxxx) 0xa0 - 0xbf\n                    var byteLength = headByte - 0xa0;\n                    object = this.decodeUtf8String(byteLength, 0);\n                }\n            }\n            else if (headByte === 0xc0) {\n                // nil\n                object = null;\n            }\n            else if (headByte === 0xc2) {\n                // false\n                object = false;\n            }\n            else if (headByte === 0xc3) {\n                // true\n                object = true;\n            }\n            else if (headByte === 0xca) {\n                // float 32\n                object = this.readF32();\n            }\n            else if (headByte === 0xcb) {\n                // float 64\n                object = this.readF64();\n            }\n            else if (headByte === 0xcc) {\n                // uint 8\n                object = this.readU8();\n            }\n            else if (headByte === 0xcd) {\n                // uint 16\n                object = this.readU16();\n            }\n            else if (headByte === 0xce) {\n                // uint 32\n                object = this.readU32();\n            }\n            else if (headByte === 0xcf) {\n                // uint 64\n                object = this.readU64();\n            }\n            else if (headByte === 0xd0) {\n                // int 8\n                object = this.readI8();\n            }\n            else if (headByte === 0xd1) {\n                // int 16\n                object = this.readI16();\n            }\n            else if (headByte === 0xd2) {\n                // int 32\n                object = this.readI32();\n            }\n            else if (headByte === 0xd3) {\n                // int 64\n                object = this.readI64();\n            }\n            else if (headByte === 0xd9) {\n                // str 8\n                var byteLength = this.lookU8();\n                object = this.decodeUtf8String(byteLength, 1);\n            }\n            else if (headByte === 0xda) {\n                // str 16\n                var byteLength = this.lookU16();\n                object = this.decodeUtf8String(byteLength, 2);\n            }\n            else if (headByte === 0xdb) {\n                // str 32\n                var byteLength = this.lookU32();\n                object = this.decodeUtf8String(byteLength, 4);\n            }\n            else if (headByte === 0xdc) {\n                // array 16\n                var size = this.readU16();\n                if (size !== 0) {\n                    this.pushArrayState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = [];\n                }\n            }\n            else if (headByte === 0xdd) {\n                // array 32\n                var size = this.readU32();\n                if (size !== 0) {\n                    this.pushArrayState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = [];\n                }\n            }\n            else if (headByte === 0xde) {\n                // map 16\n                var size = this.readU16();\n                if (size !== 0) {\n                    this.pushMapState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = {};\n                }\n            }\n            else if (headByte === 0xdf) {\n                // map 32\n                var size = this.readU32();\n                if (size !== 0) {\n                    this.pushMapState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = {};\n                }\n            }\n            else if (headByte === 0xc4) {\n                // bin 8\n                var size = this.lookU8();\n                object = this.decodeBinary(size, 1);\n            }\n            else if (headByte === 0xc5) {\n                // bin 16\n                var size = this.lookU16();\n                object = this.decodeBinary(size, 2);\n            }\n            else if (headByte === 0xc6) {\n                // bin 32\n                var size = this.lookU32();\n                object = this.decodeBinary(size, 4);\n            }\n            else if (headByte === 0xd4) {\n                // fixext 1\n                object = this.decodeExtension(1, 0);\n            }\n            else if (headByte === 0xd5) {\n                // fixext 2\n                object = this.decodeExtension(2, 0);\n            }\n            else if (headByte === 0xd6) {\n                // fixext 4\n                object = this.decodeExtension(4, 0);\n            }\n            else if (headByte === 0xd7) {\n                // fixext 8\n                object = this.decodeExtension(8, 0);\n            }\n            else if (headByte === 0xd8) {\n                // fixext 16\n                object = this.decodeExtension(16, 0);\n            }\n            else if (headByte === 0xc7) {\n                // ext 8\n                var size = this.lookU8();\n                object = this.decodeExtension(size, 1);\n            }\n            else if (headByte === 0xc8) {\n                // ext 16\n                var size = this.lookU16();\n                object = this.decodeExtension(size, 2);\n            }\n            else if (headByte === 0xc9) {\n                // ext 32\n                var size = this.lookU32();\n                object = this.decodeExtension(size, 4);\n            }\n            else {\n                throw new DecodeError(\"Unrecognized type byte: \".concat(prettyByte(headByte)));\n            }\n            this.complete();\n            var stack = this.stack;\n            while (stack.length > 0) {\n                // arrays and maps\n                var state = stack[stack.length - 1];\n                if (state.type === 0 /* State.ARRAY */) {\n                    state.array[state.position] = object;\n                    state.position++;\n                    if (state.position === state.size) {\n                        stack.pop();\n                        object = state.array;\n                    }\n                    else {\n                        continue DECODE;\n                    }\n                }\n                else if (state.type === 1 /* State.MAP_KEY */) {\n                    if (!isValidMapKeyType(object)) {\n                        throw new DecodeError(\"The type of key must be string or number but \" + typeof object);\n                    }\n                    if (object === \"__proto__\") {\n                        throw new DecodeError(\"The key __proto__ is not allowed\");\n                    }\n                    state.key = object;\n                    state.type = 2 /* State.MAP_VALUE */;\n                    continue DECODE;\n                }\n                else {\n                    // it must be `state.type === State.MAP_VALUE` here\n                    state.map[state.key] = object;\n                    state.readCount++;\n                    if (state.readCount === state.size) {\n                        stack.pop();\n                        object = state.map;\n                    }\n                    else {\n                        state.key = null;\n                        state.type = 1 /* State.MAP_KEY */;\n                        continue DECODE;\n                    }\n                }\n            }\n            return object;\n        }\n    };\n    Decoder.prototype.readHeadByte = function () {\n        if (this.headByte === HEAD_BYTE_REQUIRED) {\n            this.headByte = this.readU8();\n            // console.log(\"headByte\", prettyByte(this.headByte));\n        }\n        return this.headByte;\n    };\n    Decoder.prototype.complete = function () {\n        this.headByte = HEAD_BYTE_REQUIRED;\n    };\n    Decoder.prototype.readArraySize = function () {\n        var headByte = this.readHeadByte();\n        switch (headByte) {\n            case 0xdc:\n                return this.readU16();\n            case 0xdd:\n                return this.readU32();\n            default: {\n                if (headByte < 0xa0) {\n                    return headByte - 0x90;\n                }\n                else {\n                    throw new DecodeError(\"Unrecognized array type byte: \".concat(prettyByte(headByte)));\n                }\n            }\n        }\n    };\n    Decoder.prototype.pushMapState = function (size) {\n        if (size > this.maxMapLength) {\n            throw new DecodeError(\"Max length exceeded: map length (\".concat(size, \") > maxMapLengthLength (\").concat(this.maxMapLength, \")\"));\n        }\n        this.stack.push({\n            type: 1 /* State.MAP_KEY */,\n            size: size,\n            key: null,\n            readCount: 0,\n            map: {},\n        });\n    };\n    Decoder.prototype.pushArrayState = function (size) {\n        if (size > this.maxArrayLength) {\n            throw new DecodeError(\"Max length exceeded: array length (\".concat(size, \") > maxArrayLength (\").concat(this.maxArrayLength, \")\"));\n        }\n        this.stack.push({\n            type: 0 /* State.ARRAY */,\n            size: size,\n            array: new Array(size),\n            position: 0,\n        });\n    };\n    Decoder.prototype.decodeUtf8String = function (byteLength, headerOffset) {\n        var _a;\n        if (byteLength > this.maxStrLength) {\n            throw new DecodeError(\"Max length exceeded: UTF-8 byte length (\".concat(byteLength, \") > maxStrLength (\").concat(this.maxStrLength, \")\"));\n        }\n        if (this.bytes.byteLength < this.pos + headerOffset + byteLength) {\n            throw MORE_DATA;\n        }\n        var offset = this.pos + headerOffset;\n        var object;\n        if (this.stateIsMapKey() && ((_a = this.keyDecoder) === null || _a === void 0 ? void 0 : _a.canBeCached(byteLength))) {\n            object = this.keyDecoder.decode(this.bytes, offset, byteLength);\n        }\n        else if (byteLength > TEXT_DECODER_THRESHOLD) {\n            object = utf8DecodeTD(this.bytes, offset, byteLength);\n        }\n        else {\n            object = utf8DecodeJs(this.bytes, offset, byteLength);\n        }\n        this.pos += headerOffset + byteLength;\n        return object;\n    };\n    Decoder.prototype.stateIsMapKey = function () {\n        if (this.stack.length > 0) {\n            var state = this.stack[this.stack.length - 1];\n            return state.type === 1 /* State.MAP_KEY */;\n        }\n        return false;\n    };\n    Decoder.prototype.decodeBinary = function (byteLength, headOffset) {\n        if (byteLength > this.maxBinLength) {\n            throw new DecodeError(\"Max length exceeded: bin length (\".concat(byteLength, \") > maxBinLength (\").concat(this.maxBinLength, \")\"));\n        }\n        if (!this.hasRemaining(byteLength + headOffset)) {\n            throw MORE_DATA;\n        }\n        var offset = this.pos + headOffset;\n        var object = this.bytes.subarray(offset, offset + byteLength);\n        this.pos += headOffset + byteLength;\n        return object;\n    };\n    Decoder.prototype.decodeExtension = function (size, headOffset) {\n        if (size > this.maxExtLength) {\n            throw new DecodeError(\"Max length exceeded: ext length (\".concat(size, \") > maxExtLength (\").concat(this.maxExtLength, \")\"));\n        }\n        var extType = this.view.getInt8(this.pos + headOffset);\n        var data = this.decodeBinary(size, headOffset + 1 /* extType */);\n        return this.extensionCodec.decode(data, extType, this.context);\n    };\n    Decoder.prototype.lookU8 = function () {\n        return this.view.getUint8(this.pos);\n    };\n    Decoder.prototype.lookU16 = function () {\n        return this.view.getUint16(this.pos);\n    };\n    Decoder.prototype.lookU32 = function () {\n        return this.view.getUint32(this.pos);\n    };\n    Decoder.prototype.readU8 = function () {\n        var value = this.view.getUint8(this.pos);\n        this.pos++;\n        return value;\n    };\n    Decoder.prototype.readI8 = function () {\n        var value = this.view.getInt8(this.pos);\n        this.pos++;\n        return value;\n    };\n    Decoder.prototype.readU16 = function () {\n        var value = this.view.getUint16(this.pos);\n        this.pos += 2;\n        return value;\n    };\n    Decoder.prototype.readI16 = function () {\n        var value = this.view.getInt16(this.pos);\n        this.pos += 2;\n        return value;\n    };\n    Decoder.prototype.readU32 = function () {\n        var value = this.view.getUint32(this.pos);\n        this.pos += 4;\n        return value;\n    };\n    Decoder.prototype.readI32 = function () {\n        var value = this.view.getInt32(this.pos);\n        this.pos += 4;\n        return value;\n    };\n    Decoder.prototype.readU64 = function () {\n        var value = getUint64(this.view, this.pos);\n        this.pos += 8;\n        return value;\n    };\n    Decoder.prototype.readI64 = function () {\n        var value = getInt64(this.view, this.pos);\n        this.pos += 8;\n        return value;\n    };\n    Decoder.prototype.readF32 = function () {\n        var value = this.view.getFloat32(this.pos);\n        this.pos += 4;\n        return value;\n    };\n    Decoder.prototype.readF64 = function () {\n        var value = this.view.getFloat64(this.pos);\n        this.pos += 8;\n        return value;\n    };\n    return Decoder;\n}());\nexport { Decoder };\n"]},"metadata":{},"sourceType":"module"}